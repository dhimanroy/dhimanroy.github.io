<!doctype html><html><head><title>Python script for extracting data from ascii files</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css><link rel=icon type=image/png href=/images/site/favicon_hu14f86f4c455681d899338db8db5c3617_46413_42x0_resize_box_2.png><meta property="og:title" content="Python script for extracting data from ascii files"><meta property="og:description" content="Python script for extracting data from ascii filesThis script reads ascii files, collects desired data, process and store processed data to a .dat (actually a csv) file. This can also be done using grep in linux terminal.  Now, let&rsquo;s jump into the script. Necessary packages like pandas, natsort, pathlib are imported first.
import os import pandas as pd from pathlib import Path import natsort Changing the working directory to the directory in which the file is located such that input files from this directory can be accessed."><meta property="og:type" content="article"><meta property="og:url" content="https://dhimanroy.github.io/codes/python-scripts/for-extracting-data/"><meta property="article:published_time" content="2021-11-07T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-07T00:00:00+00:00"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/notes.css><link rel=stylesheet href=/css/navigators/sidebar.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-199814292-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu98b1e25c44cc76379c733a63e18e4740_51846_42x0_resize_box_2.png alt=Logo>
Dhiman Roy</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/main-logo_hu98b1e25c44cc76379c733a63e18e4740_51846_42x0_resize_box_2.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu14f86f4c455681d899338db8db5c3617_46413_42x0_resize_box_2.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/codes data-filter=all>Codes</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/codes/bash-scripts/>Bash Scripts</a><ul><li><a href=/codes/bash-scripts/for-running-a-python-script-in-each-subdirectory/ title="For running a python script in each subdirectory">For running a python script in each subdirectory</a></li><li><a href=/codes/bash-scripts/for-custom-commands/ title="For custom commands">For custom commands</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/codes/batch-scripts/>Batch Scripts</a><ul><li><a href=/codes/batch-scripts/for-running-a-phython-script-in-each-subdirectory/ title="For running a phython script in each subdirectory">For running a phython script in each subdirectory</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/codes/scheme-codes/>Scheme Codes</a><ul><li><a href=/codes/scheme-codes/for-creating-points-and-monitors/ title="For creating points and monitors">For creating points and monitors</a></li><li><a href=/codes/scheme-codes/for-extacting-xy-plot-data/ title="For extacting xy plot data">For extacting xy plot data</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/codes/python-scripts/>Python Scripts</a><ul class=active><li><a href=/codes/python-scripts/for-calculating-average-drag/ title="For calculating average drag coefficient">For calculating average drag coefficient</a></li><li><a class=active href=/codes/python-scripts/for-extracting-data/ title="For extracting data from ascii files">For extracting data from ascii files</a></li><li><a href=/codes/python-scripts/for-creating-java-script/ title="For creating Java Script that populates a webform">For creating Java Script that populates a webform</a></li><li><a href=/codes/python-scripts/for-making-pdf-and-sending-it-to-the-faculty-member/ title="For making PDF of exam routine and sending mail">For making PDF of exam routine and sending mail</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/codes/matlab-scripts/>Matlab Scripts</a><ul><li><a href=/codes/matlab-scripts/fast-fourier-transformation/ title="Fast Fourier Transformation">Fast Fourier Transformation</a></li><li><i class="fas fa-plus-circle"></i><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/>For solving system of linear equations</a><ul><li><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/by-gauss-elimination-method/ title="Gauss Elimination method">Gauss Elimination method</a></li><li><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/by-gauss-jordan-method/ title="Gauss Jordan method">Gauss Jordan method</a></li><li><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/by-jacobi-method/ title="Jacobi method">Jacobi method</a></li><li><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/by-gauss-seidel-method/ title="Gauss Seidel method">Gauss Seidel method</a></li><li><a href=/codes/matlab-scripts/for-solving-system-of-linear-equations/by-successive-over-relaxation-method/ title="Successive Over Relaxation method">Successive Over Relaxation method</a></li></ul></li></ul></li><li><a href=/codes/dpm-particle-history-data/ title="DPM Particle History">DPM Particle History</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid note-card-holder" id=note-card-holder><div class=note-card><div class=item><h5 class=note-title><span>Python script for extracting data from ascii files</span></h5><div class=card><div class=card-body><p>This script reads ascii files, collects desired data, process and store processed data to a .dat (actually a csv) file. This can also be done using <a href=https://en.wikipedia.org/wiki/Grep target=blank>grep</a> in linux terminal.</br></br>Now, let&rsquo;s jump into the script. Necessary packages like pandas, natsort, pathlib are imported first.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> os
<span style=color:#f92672>import</span> pandas <span style=color:#f92672>as</span> pd
<span style=color:#f92672>from</span> pathlib <span style=color:#f92672>import</span> Path
<span style=color:#f92672>import</span> natsort
</code></pre></div><p></br>Changing the working directory to the directory in which the file is located such that input files from this directory can be accessed.</br></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>os<span style=color:#f92672>.</span>chdir(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>dirname(os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>abspath(__file__)))
CURR_DIR <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>getcwd()
</code></pre></div><p></br>Finding the directory name (not the full path) and listing the input files.</br></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>dmnFileName <span style=color:#f92672>=</span> CURR_DIR<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>&#39;</span>)[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]

temp_files <span style=color:#f92672>=</span> Path(CURR_DIR)<span style=color:#f92672>.</span>rglob(<span style=color:#e6db74>&#39;*.int&#39;</span>) <span style=color:#75715e>#reads .int files (input files) only</span>

files <span style=color:#f92672>=</span> [x <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> temp_files]
</code></pre></div><p></br>Making the skeleton.</br></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>values <span style=color:#f92672>=</span> []

<span style=color:#75715e># for A = 2.0</span>
s2p0 <span style=color:#f92672>=</span> [a list of <span style=color:#ae81ff>33</span> numbers] <span style=color:#f92672>%</span> hidden data

<span style=color:#75715e># for A = 1.5</span>
s1p5 <span style=color:#f92672>=</span> [a list of <span style=color:#ae81ff>33</span> numbers] <span style=color:#f92672>%</span> hidden data

<span style=color:#75715e># for A = 1.0</span>
s1p0 <span style=color:#f92672>=</span> [a list of <span style=color:#ae81ff>33</span> numbers] <span style=color:#f92672>%</span> hidden data

<span style=color:#75715e># for A = 0.5</span>
s0p5 <span style=color:#f92672>=</span> [a list of <span style=color:#ae81ff>33</span> numbers] <span style=color:#f92672>%</span> hidden data

n <span style=color:#f92672>=</span> float(dmnFileName<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;_&#39;</span>)[<span style=color:#ae81ff>1</span>])

<span style=color:#66d9ef>if</span> n <span style=color:#f92672>==</span> <span style=color:#ae81ff>0.5</span>:
    s <span style=color:#f92672>=</span> s0p5
<span style=color:#66d9ef>elif</span> n <span style=color:#f92672>==</span> <span style=color:#ae81ff>1.0</span>:
    s <span style=color:#f92672>=</span> s1p0
<span style=color:#66d9ef>elif</span> n <span style=color:#f92672>==</span> <span style=color:#ae81ff>1.5</span>:
    s <span style=color:#f92672>=</span> s1p5
<span style=color:#66d9ef>elif</span> n <span style=color:#f92672>==</span> <span style=color:#ae81ff>2.0</span>:
    s <span style=color:#f92672>=</span> s2p0
</code></pre></div><p></br>Reading each file, collecting information, processing and storing for future use.</br></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>for</span> name <span style=color:#f92672>in</span> natsort<span style=color:#f92672>.</span>os_sorted(files):
    linesInHeader <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
    file <span style=color:#f92672>=</span> open(name,<span style=color:#e6db74>&#39;r&#39;</span>)
    lines <span style=color:#f92672>=</span> file<span style=color:#f92672>.</span>readlines()[linesInHeader:]
    lines <span style=color:#f92672>=</span> [line<span style=color:#f92672>.</span>strip(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>) <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> lines]
    lines <span style=color:#f92672>=</span> [line<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39; &#39;</span>) <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> lines]
    integral <span style=color:#f92672>=</span> float(lines[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>][<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
    values<span style=color:#f92672>.</span>append(integral)
    file<span style=color:#f92672>.</span>close()

values <span style=color:#f92672>=</span> [val <span style=color:#f92672>*</span> <span style=color:#ae81ff>1000</span> <span style=color:#66d9ef>for</span> val <span style=color:#f92672>in</span> values]

<span style=color:#66d9ef>try</span>:
    data1 <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;s&#34;</span>: s[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>17</span>],
            <span style=color:#e6db74>&#34;value&#34;</span>: values[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>17</span>]}    
    df1 <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame(data1)
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span>, dmnFileName)
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>Increasing</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>____________________&#39;</span>)
    <span style=color:#66d9ef>print</span>(df1)
    df1<span style=color:#f92672>.</span>to_csv(dmnFileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-increasing.dat&#39;</span>, index <span style=color:#f92672>=</span> False)

    data2 <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;s&#34;</span>: s[<span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>33</span>],
            <span style=color:#e6db74>&#34;value&#34;</span>: values[<span style=color:#ae81ff>16</span>:<span style=color:#ae81ff>33</span>]}    
    df2 <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame(data2)
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>Decreasing</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>____________________&#39;</span>)
    <span style=color:#66d9ef>print</span>(df2)
    df2<span style=color:#f92672>.</span>to_csv(dmnFileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-decreasing.dat&#39;</span>, index <span style=color:#f92672>=</span> False)    

    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>______Completed______</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)

<span style=color:#66d9ef>except</span>:
    <span style=color:#66d9ef>print</span>(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>PLEASE CHECK IF THE TOTAL NUMBERS OF .int FILES is 33.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)

<span style=color:#75715e>#input(&#34;\nHit Enter to return....\n&#34;)</span>

</code></pre></div></div></div></div></div></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=/#about-me>About Me</a></li><li class=nav-item><a class=smooth-scroll href=/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=/#research>Research</a></li><li class=nav-item><a class=smooth-scroll href=/#publications>Publications</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>dhimanroy117@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4></div><div class="col-md-4 text-center"><a class=text-white>Â© 2021 || Dhiman Roy</a><p style=font-size:11px class=text-warning>Updated on:
<time>November 26, 2021</time></p></div><div class="col-md-4 text-right"></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/imagesloaded.pkgd.min.js></script><script src=/js/note.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>